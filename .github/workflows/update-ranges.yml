name: Update ISBN ranges

on:
  schedule:
    - cron: 0 6 * * 3 # Every Wednesday at 6:00 UTC
  workflow_dispatch:

jobs:
  update:

    runs-on: ubuntu-latest

    steps:
      - uses: actions/checkout@v4

      - uses: shivammathur/setup-php@v2
        with:
          php-version: 8.3

      - uses: "ramsey/composer-install@v1"
        with:
          dependency-versions: "highest"

      - name: Update ISBN ranges
        run: composer update-ranges

      - name: Create Pull Request
        uses: peter-evans/create-pull-request@v7
        with:
          token: ${{ secrets.PAT }}
          base: main
          commit-message: "feat: update ISBN ranges"
          title: ISBN ranges automatic update
          body: |
            - ISBN ranges update
            
            Auto-generated by [create-pull-request][1]
            
            [1]: https://github.com/peter-evans/create-pull-request
          branch: update-ranges
